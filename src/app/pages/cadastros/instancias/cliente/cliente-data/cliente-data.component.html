<app-header-lv2 linkAnterior="/instancias/cliente" heading="Cadastro de Cliente"
                headingAnterior="Clientes"></app-header-lv2>

<div class="col-md">
  <form #f="ngForm" (ngSubmit)="salvar(f)" autocomplete="off">

      <div class="ui-g">

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>CPF*</label>
          <p-inputMask mask="999.999.999-99" name="cpf" [(ngModel)]="cliente.cpf"></p-inputMask>
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label for="rg">RG</label>
          <input type="text" pInputText id="rg" name="rg" [(ngModel)]="cliente.rg">
        </div>

        <div class="ui-g-4 ui-md-4 ui-fluid">
          <label for="nome">Nome*</label>
          <input type="text" pInputText id="nome"
                 required name="nome" #nome="ngModel" [(ngModel)]="cliente.nome">
          <app-message [control]="nome" error="required" text="Preencha este campo."></app-message>
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>Data de Nascimento</label>
          <p-calendar name="nascimento" dateFormat="dd/mm/yy"
                      [inline]="false" [readonlyInput]="false" [showIcon]="true"
                      [(ngModel)]="cliente.nascimento" [locale]="pt"
                      #nascimento="ngModel" required></p-calendar>

          <app-message [control]="nascimento" error="required"
                       text="Informe uma data de nascimento"></app-message>
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>Sexo</label>
          <p-dropdown [options]="sexos" placeholder="Selecione: " name="sexo" required [(ngModel)]="cliente.sexo"
          [autoWidth]="false"></p-dropdown>
        </div>

      </div>

      <div class="ui-g">

        <div class="ui-g-3 ui-md-3 ui-fluid">
          <label>Nome do Pai</label>
          <input type="text" pInputText #pai="ngModel" name="pai" [(ngModel)]="cliente.pai">
        </div>

        <div class="ui-g-3 ui-md-3 ui-fluid">
          <label>Nome da Mãe</label>
          <input type="text" pInputText #mae="ngModel" name="mae" [(ngModel)]="cliente.mae">
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>Estado Civil</label>
          <p-dropdown [options]="estCivil" placeholder="Selecione: " [autoWidth]="false" name="estadoCivil"
                      [(ngModel)]="cliente.estadoCivil"></p-dropdown>
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>Tipo de Sócio</label>
          <p-dropdown [options]="tiposSocios" placeholder="Selecione: " [autoWidth]="false" name="tipo"
                      [(ngModel)]="cliente.tipo"></p-dropdown>
        </div>

        <div class="ui-g-2 ui-md-2 ui-fluid">
          <label>Secretaria</label>
          <p-dropdown [options]="secretarias" placeholder="Selecione: " [autoWidth]="false" name="secretaria"
                      [(ngModel)]="cliente.secretaria"></p-dropdown>
        </div>

        <div class="ui-g-12 ui-md-12 ui-fluid">
          <label>Observação</label>
          <textarea pInputTextarea name="obs" [(ngModel)]="cliente.obs"></textarea>
        </div>

      </div>

      <div class="ui-g-12 ui-md-12">
        <tabset>
          <tab id="tab1">
            <ng-template tabHeading>
              <i class="fa fa-address-book"></i> Contato
            </ng-template>
            <div class="ui-g">

              <div class="ui-g-12 col-md-12 ui-fluid">
                <label>E-mail</label>
                <input pInputText type="email" name="email" [(ngModel)]="cliente.email">
              </div>

            </div>

            <div class="ui-g" ngModelGroup="endereco">

              <div class="ui-g-2 col-md-2 ui-fluid">
                <label>CEP*</label>
                <p-inputMask id="cep" mask="99.999-999"
                (blur)="consultaCep($event.target.value, f)" name="cep" #cep="ngModel"
                             required [(ngModel)]="cliente.endereco.cep"></p-inputMask>
              </div>

              <div class="ui-g-6 col-md-6 ui-fluid">
                <label>Logradouro*</label>
                <input type="text" pInputText name="logradouro" #logradouro="ngModel" [(ngModel)]="cliente.endereco.logradouro"
                       required>
              </div>

              <div class="ui-g-2 col-md-2 ui-fluid">
                <label>Número*</label>
                <input type="text" pInputText name="numero" #numero="ngModel" [(ngModel)]="cliente.endereco.numero"
                       required>
              </div>

              <div class="ui-g-2 col-md-2 ui-fluid">
                <label>Complemento</label>
                <input type="text" pInputText name="complemento" #complemento="ngModel" [(ngModel)]="cliente.endereco.complemento">
              </div>

              <div class="ui-g-5 col-md-5 ui-fluid">
                <label>Bairro*</label>
                <input type="text" pInputText name="bairro" #bairro="ngModel" [(ngModel)]="cliente.endereco.bairro"
                       required>
              </div>

              <div class="ui-g-5 col-md-5 ui-fluid">
                <label>Cidade*</label>
                <input type="text" pInputText name="cidade" #cidade="ngModel" [(ngModel)]="cliente.endereco.cidade"
                       required>
              </div>

              <div class="ui-g-2 col-md-2 ui-fluid">
                <label>Estado*</label>
                <input type="text" pInputText name="estado" #estado="ngModel"
                       [(ngModel)]="cliente.endereco.estado" required>
              </div>

            </div>
            <app-cliente-data-telefone [telefones]="cliente.telefones"></app-cliente-data-telefone>

          </tab>
          <tab>
            <ng-template tabHeading>
              <i class="fa fa-credit-card"></i> Dados Bancários
            </ng-template>

          </tab>
          <tab>
            <ng-template tabHeading>
              <i class="fa fa-users"></i> Dependentes
            </ng-template>
            <app-cliente-data-dependente [dependentes]="cliente.dependentes"></app-cliente-data-dependente>

          </tab>
        </tabset>
    </div>
    <div class="ui-g-12">
      <button pButton type="submit" label="Salvar" [disabled]="f.invalid"></button>
    </div>
  </form>
</div>
<div class="ui-g-12">
  <pre>{{f.value | json}}</pre>
</div>
